"use strict";(self.webpackChunkusync=self.webpackChunkusync||[]).push([[519],{3905:function(t,e,a){a.d(e,{Zo:function(){return k},kt:function(){return o}});var l=a(7294);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,l)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e){if(null==t)return{};var a,l,n=function(t,e){if(null==t)return{};var a,l,n={},r=Object.keys(t);for(l=0;l<r.length;l++)a=r[l],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(l=0;l<r.length;l++)a=r[l],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var m=l.createContext({}),u=function(t){var e=l.useContext(m),a=e;return t&&(a="function"==typeof t?t(e):p(p({},e),t)),a},k=function(t){var e=u(t.components);return l.createElement(m.Provider,{value:e},t.children)},N={inlineCode:"code",wrapper:function(t){var e=t.children;return l.createElement(l.Fragment,{},e)}},d=l.forwardRef((function(t,e){var a=t.components,n=t.mdxType,r=t.originalType,m=t.parentName,k=i(t,["components","mdxType","originalType","parentName"]),d=u(a),o=n,c=d["".concat(m,".").concat(o)]||d[o]||N[o]||r;return a?l.createElement(c,p(p({ref:e},k),{},{components:a})):l.createElement(c,p({ref:e},k))}));function o(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var r=a.length,p=new Array(r);p[0]=d;var i={};for(var m in e)hasOwnProperty.call(e,m)&&(i[m]=e[m]);i.originalType=t,i.mdxType="string"==typeof t?t:n,p[1]=i;for(var u=2;u<r;u++)p[u]=a[u];return l.createElement.apply(null,p)}return l.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5150:function(t,e,a){a.r(e),a.d(e,{frontMatter:function(){return i},contentTitle:function(){return m},metadata:function(){return u},toc:function(){return k},default:function(){return d}});var l=a(7462),n=a(3366),r=(a(7294),a(3905)),p=["components"],i={},m="DataX ElasticSearchWriter",u={unversionedId:"\u4f7f\u7528\u6587\u6863/writer/elasticsearchWriter",id:"\u4f7f\u7528\u6587\u6863/writer/elasticsearchWriter",title:"DataX ElasticSearchWriter",description:"---",source:"@site/docs\\\u4f7f\u7528\u6587\u6863\\writer\\elasticsearchWriter.md",sourceDirName:"\u4f7f\u7528\u6587\u6863/writer",slug:"/\u4f7f\u7528\u6587\u6863/writer/elasticsearchWriter",permalink:"/Usync/docs/\u4f7f\u7528\u6587\u6863/writer/elasticsearchWriter",editUrl:"https://github.com/unicm/Usync/docs/\u4f7f\u7528\u6587\u6863\\writer\\elasticsearchWriter.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"DorisWriter \u63d2\u4ef6\u6587\u6863",permalink:"/Usync/docs/\u4f7f\u7528\u6587\u6863/writer/dorisWriter"},next:{title:"FtpWriter \u63d2\u4ef6\u6587\u6863",permalink:"/Usync/docs/\u4f7f\u7528\u6587\u6863/writer/ftpWriter"}},k=[{value:"1 \u5feb\u901f\u4ecb\u7ecd",id:"1-\u5feb\u901f\u4ecb\u7ecd",children:[],level:2},{value:"2 \u5b9e\u73b0\u539f\u7406",id:"2-\u5b9e\u73b0\u539f\u7406",children:[],level:2},{value:"3 \u529f\u80fd\u8bf4\u660e",id:"3-\u529f\u80fd\u8bf4\u660e",children:[{value:"3.1 \u914d\u7f6e\u6837\u4f8b",id:"31-\u914d\u7f6e\u6837\u4f8b",children:[{value:"job.json",id:"jobjson",children:[],level:4},{value:"3.2 \u53c2\u6570\u8bf4\u660e",id:"32-\u53c2\u6570\u8bf4\u660e",children:[],level:4}],level:3}],level:2},{value:"4 \u6027\u80fd\u62a5\u544a",id:"4-\u6027\u80fd\u62a5\u544a",children:[{value:"4.1 \u73af\u5883\u51c6\u5907",id:"41-\u73af\u5883\u51c6\u5907",children:[{value:"4.1.1 \u8f93\u5165\u6570\u636e\u7c7b\u578b(streamreader)",id:"411-\u8f93\u5165\u6570\u636e\u7c7b\u578bstreamreader",children:[],level:4},{value:"4.1.2 \u8f93\u51fa\u6570\u636e\u7c7b\u578b(eswriter)",id:"412-\u8f93\u51fa\u6570\u636e\u7c7b\u578beswriter",children:[],level:4},{value:"4.1.2 \u673a\u5668\u53c2\u6570",id:"412-\u673a\u5668\u53c2\u6570",children:[],level:4},{value:"4.1.3 DataX jvm \u53c2\u6570",id:"413-datax-jvm-\u53c2\u6570",children:[],level:4}],level:3},{value:"4.2 \u6d4b\u8bd5\u62a5\u544a",id:"42-\u6d4b\u8bd5\u62a5\u544a",children:[],level:3},{value:"4.3 \u6d4b\u8bd5\u603b\u7ed3",id:"43-\u6d4b\u8bd5\u603b\u7ed3",children:[],level:3}],level:2},{value:"5 \u7ea6\u675f\u9650\u5236",id:"5-\u7ea6\u675f\u9650\u5236",children:[],level:2}],N={toc:k};function d(t){var e=t.components,a=(0,n.Z)(t,p);return(0,r.kt)("wrapper",(0,l.Z)({},N,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"datax-elasticsearchwriter"},"DataX ElasticSearchWriter"),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"1-\u5feb\u901f\u4ecb\u7ecd"},"1 \u5feb\u901f\u4ecb\u7ecd"),(0,r.kt)("p",null,"\u6570\u636e\u5bfc\u5165elasticsearch\u7684\u63d2\u4ef6"),(0,r.kt)("h2",{id:"2-\u5b9e\u73b0\u539f\u7406"},"2 \u5b9e\u73b0\u539f\u7406"),(0,r.kt)("p",null,"\u4f7f\u7528elasticsearch\u7684rest api\u63a5\u53e3\uff0c \u6279\u91cf\u628a\u4ecereader\u8bfb\u5165\u7684\u6570\u636e\u5199\u5165elasticsearch"),(0,r.kt)("h2",{id:"3-\u529f\u80fd\u8bf4\u660e"},"3 \u529f\u80fd\u8bf4\u660e"),(0,r.kt)("h3",{id:"31-\u914d\u7f6e\u6837\u4f8b"},"3.1 \u914d\u7f6e\u6837\u4f8b"),(0,r.kt)("h4",{id:"jobjson"},"job.json"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "job": {\n    "setting": {\n        "speed": {\n            "channel": 1\n        }\n    },\n    "content": [\n      {\n        "reader": {\n          ...\n        },\n        "writer": {\n          "name": "elasticsearchwriter",\n          "parameter": {\n            "endpoint": "http://xxx:9999",\n            "accessId": "xxxx",\n            "accessKey": "xxxx",\n            "index": "test-1",\n            "type": "default",\n            "cleanup": true,\n            "settings": {"index" :{"number_of_shards": 1, "number_of_replicas": 0}},\n            "discovery": false,\n            "batchSize": 1000,\n            "splitter": ",",\n            "column": [\n              {"name": "pk", "type": "id"},\n              { "name": "col_ip","type": "ip" },\n              { "name": "col_double","type": "double" },\n              { "name": "col_long","type": "long" },\n              { "name": "col_integer","type": "integer" },\n              { "name": "col_keyword", "type": "keyword" },\n              { "name": "col_text", "type": "text", "analyzer": "ik_max_word"},\n              { "name": "col_geo_point", "type": "geo_point" },\n              { "name": "col_date", "type": "date", "format": "yyyy-MM-dd HH:mm:ss"},\n              { "name": "col_nested1", "type": "nested" },\n              { "name": "col_nested2", "type": "nested" },\n              { "name": "col_object1", "type": "object" },\n              { "name": "col_object2", "type": "object" },\n              { "name": "col_integer_array", "type":"integer", "array":true},\n              { "name": "col_geo_shape", "type":"geo_shape", "tree": "quadtree", "precision": "10m"}\n            ]\n          }\n        }\n      }\n    ]\n  }\n}\n')),(0,r.kt)("h4",{id:"32-\u53c2\u6570\u8bf4\u660e"},"3.2 \u53c2\u6570\u8bf4\u660e"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"endpoint")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1aElasticSearch\u7684\u8fde\u63a5\u5730\u5740")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u662f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"accessId")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1ahttp auth\u4e2d\u7684user")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a\u7a7a"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"accessKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1ahttp auth\u4e2d\u7684password")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a\u7a7a"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"index")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1aelasticsearch\u4e2d\u7684index\u540d(\u7c7b\u6bd4\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5e93)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u662f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"type")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1aelasticsearch\u4e2dindex\u7684type\u540d(\u7c7b\u6bd4\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u8868)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1aindex\u540d"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"cleanup")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u662f\u5426\u5220\u9664\u539f\u8868")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1afalse"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"batchSize")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u7684\u6761\u6570")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a1000"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"trySize")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u5931\u8d25\u540e\u91cd\u8bd5\u7684\u6b21\u6570")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a30"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"timeout")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a600000"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"discovery")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u542f\u7528\u8282\u70b9\u53d1\u73b0\u5c06(\u8f6e\u8be2)\u5e76\u5b9a\u671f\u66f4\u65b0\u5ba2\u6237\u673a\u4e2d\u7684\u670d\u52a1\u5668\u5217\u8868\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1afalse"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"compression")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1ahttp\u8bf7\u6c42\uff0c\u5f00\u542f\u538b\u7f29")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1atrue"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"multiThread")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1ahttp\u8bf7\u6c42\uff0c\u662f\u5426\u6709\u591a\u7ebf\u7a0b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1atrue"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"ignoreWriteError")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u5ffd\u7565\u5199\u5165\u9519\u8bef\uff0c\u4e0d\u91cd\u8bd5\uff0c\u7ee7\u7eed\u5199\u5165")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1afalse"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"ignoreParseError")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u5ffd\u7565\u89e3\u6790\u6570\u636e\u683c\u5f0f\u9519\u8bef\uff0c\u7ee7\u7eed\u5199\u5165")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1atrue"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"alias")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\u5199\u5165\u522b\u540d")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"aliasMode")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\u589e\u52a0\u522b\u540d\u7684\u6a21\u5f0f\uff0cappend(\u589e\u52a0\u6a21\u5f0f), exclusive(\u53ea\u7559\u8fd9\u4e00\u4e2a)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1aappend"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"settings")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u521b\u5efaindex\u65f6\u5019\u7684settings, \u4e0eelasticsearch\u5b98\u65b9\u76f8\u540c")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"splitter")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1a\u5982\u679c\u63d2\u5165\u6570\u636e\u662farray\uff0c\u5c31\u4f7f\u7528\u6307\u5b9a\u5206\u9694\u7b26")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a-,-"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"column")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0\uff1aelasticsearch\u6240\u652f\u6301\u7684\u5b57\u6bb5\u7c7b\u578b\uff0c\u6837\u4f8b\u4e2d\u5305\u542b\u4e86\u5168\u90e8")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u662f"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"dynamic")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u63cf\u8ff0: \u4e0d\u4f7f\u7528datax\u7684mappings\uff0c\u4f7f\u7528es\u81ea\u5df1\u7684\u81ea\u52a8mappings")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5fc5\u9009: \u5426")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c: false"))),(0,r.kt)("h2",{id:"4-\u6027\u80fd\u62a5\u544a"},"4 \u6027\u80fd\u62a5\u544a"),(0,r.kt)("h3",{id:"41-\u73af\u5883\u51c6\u5907"},"4.1 \u73af\u5883\u51c6\u5907"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u603b\u6570\u636e\u91cf 1kw\u6761\u6570\u636e, \u6bcf\u67610.1kb"),(0,r.kt)("li",{parentName:"ul"},"1\u4e2ashard, 0\u4e2areplica"),(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u52a0id\uff0c\u8fd9\u6837\u9ed8\u8ba4\u662fappend_only\u6a21\u5f0f\uff0c\u4e0d\u68c0\u67e5\u7248\u672c\uff0c\u63d2\u5165\u901f\u5ea6\u4f1a\u670920%\u5de6\u53f3\u7684\u63d0\u5347")),(0,r.kt)("h4",{id:"411-\u8f93\u5165\u6570\u636e\u7c7b\u578bstreamreader"},"4.1.1 \u8f93\u5165\u6570\u636e\u7c7b\u578b(streamreader)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"value": "1.1.1.1", "type": "string"},\n{"value": 19890604.0, "type": "double"},\n{"value": 19890604, "type": "long"},\n{"value": 19890604, "type": "long"},\n{"value": "hello world", "type": "string"},\n{"value": "hello world", "type": "string"},\n{"value": "41.12,-71.34", "type": "string"},\n{"value": "2017-05-25", "type": "string"},\n')),(0,r.kt)("h4",{id:"412-\u8f93\u51fa\u6570\u636e\u7c7b\u578beswriter"},"4.1.2 \u8f93\u51fa\u6570\u636e\u7c7b\u578b(eswriter)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{ "name": "col_ip","type": "ip" },\n{ "name": "col_double","type": "double" },\n{ "name": "col_long","type": "long" },\n{ "name": "col_integer","type": "integer" },\n{ "name": "col_keyword", "type": "keyword" },\n{ "name": "col_text", "type": "text"},\n{ "name": "col_geo_point", "type": "geo_point" },\n{ "name": "col_date", "type": "date"}\n')),(0,r.kt)("h4",{id:"412-\u673a\u5668\u53c2\u6570"},"4.1.2 \u673a\u5668\u53c2\u6570"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"cpu: 32  Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz"),(0,r.kt)("li",{parentName:"ol"},"mem: 128G"),(0,r.kt)("li",{parentName:"ol"},"net: \u5343\u5146\u53cc\u7f51\u5361")),(0,r.kt)("h4",{id:"413-datax-jvm-\u53c2\u6570"},"4.1.3 DataX jvm \u53c2\u6570"),(0,r.kt)("p",null,"-Xms1024m -Xmx1024m -XX:+HeapDumpOnOutOfMemoryError"),(0,r.kt)("h3",{id:"42-\u6d4b\u8bd5\u62a5\u544a"},"4.2 \u6d4b\u8bd5\u62a5\u544a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u901a\u9053\u6570"),(0,r.kt)("th",{parentName:"tr",align:null},"\u6279\u91cf\u63d0\u4ea4\u884c\u6570"),(0,r.kt)("th",{parentName:"tr",align:null},"DataX\u901f\u5ea6(Rec/s)"),(0,r.kt)("th",{parentName:"tr",align:null},"DataX\u6d41\u91cf(MB/s)"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"256"),(0,r.kt)("td",{parentName:"tr",align:null},"11013"),(0,r.kt)("td",{parentName:"tr",align:null},"0.828")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"1024"),(0,r.kt)("td",{parentName:"tr",align:null},"19417"),(0,r.kt)("td",{parentName:"tr",align:null},"1.43")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"4096"),(0,r.kt)("td",{parentName:"tr",align:null},"23923"),(0,r.kt)("td",{parentName:"tr",align:null},"1.76")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"8172"),(0,r.kt)("td",{parentName:"tr",align:null},"24449"),(0,r.kt)("td",{parentName:"tr",align:null},"1.80")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"8"),(0,r.kt)("td",{parentName:"tr",align:null},"256"),(0,r.kt)("td",{parentName:"tr",align:null},"21459"),(0,r.kt)("td",{parentName:"tr",align:null},"1.58")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"8"),(0,r.kt)("td",{parentName:"tr",align:null},"1024"),(0,r.kt)("td",{parentName:"tr",align:null},"37037"),(0,r.kt)("td",{parentName:"tr",align:null},"2.72")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"8"),(0,r.kt)("td",{parentName:"tr",align:null},"4096"),(0,r.kt)("td",{parentName:"tr",align:null},"45454"),(0,r.kt)("td",{parentName:"tr",align:null},"3.34")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"8"),(0,r.kt)("td",{parentName:"tr",align:null},"8172"),(0,r.kt)("td",{parentName:"tr",align:null},"45871"),(0,r.kt)("td",{parentName:"tr",align:null},"3.37")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"16"),(0,r.kt)("td",{parentName:"tr",align:null},"1024"),(0,r.kt)("td",{parentName:"tr",align:null},"67567"),(0,r.kt)("td",{parentName:"tr",align:null},"4.96")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"16"),(0,r.kt)("td",{parentName:"tr",align:null},"4096"),(0,r.kt)("td",{parentName:"tr",align:null},"78125"),(0,r.kt)("td",{parentName:"tr",align:null},"5.74")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"16"),(0,r.kt)("td",{parentName:"tr",align:null},"8172"),(0,r.kt)("td",{parentName:"tr",align:null},"77519"),(0,r.kt)("td",{parentName:"tr",align:null},"5.69")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"32"),(0,r.kt)("td",{parentName:"tr",align:null},"1024"),(0,r.kt)("td",{parentName:"tr",align:null},"94339"),(0,r.kt)("td",{parentName:"tr",align:null},"6.93")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"32"),(0,r.kt)("td",{parentName:"tr",align:null},"4096"),(0,r.kt)("td",{parentName:"tr",align:null},"96153"),(0,r.kt)("td",{parentName:"tr",align:null},"7.06")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"64"),(0,r.kt)("td",{parentName:"tr",align:null},"1024"),(0,r.kt)("td",{parentName:"tr",align:null},"91743"),(0,r.kt)("td",{parentName:"tr",align:null},"6.74")))),(0,r.kt)("h3",{id:"43-\u6d4b\u8bd5\u603b\u7ed3"},"4.3 \u6d4b\u8bd5\u603b\u7ed3"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6700\u597d\u7684\u7ed3\u679c\u662f32\u901a\u9053\uff0c\u6bcf\u6b21\u4f204096\uff0c\u5982\u679c\u5355\u6761\u6570\u636e\u5f88\u5927\uff0c \u8bf7\u9002\u5f53\u51cf\u5c11\u6279\u91cf\u6570\uff0c\u9632\u6b62oom"),(0,r.kt)("li",{parentName:"ul"},"\u5f53\u7136\u8fd9\u4e2a\u5f88\u5bb9\u6613\u6c34\u5e73\u6269\u5c55\uff0c\u800c\u4e14es\u4e5f\u662f\u5206\u5e03\u5f0f\u7684\uff0c\u591a\u8bbe\u7f6e\u51e0\u4e2ashard\u4e5f\u53ef\u4ee5\u6c34\u5e73\u6269\u5c55")),(0,r.kt)("h2",{id:"5-\u7ea6\u675f\u9650\u5236"},"5 \u7ea6\u675f\u9650\u5236"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u5bfc\u5165id\uff0c\u8fd9\u6837\u6570\u636e\u5bfc\u5165\u5931\u8d25\u4e5f\u4f1a\u91cd\u8bd5\uff0c\u91cd\u65b0\u5bfc\u5165\u4e5f\u4ec5\u4ec5\u662f\u8986\u76d6\uff0c\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u5bfc\u5165id\uff0c\u5c31\u662fappend_only\u6a21\u5f0f\uff0celasticsearch\u81ea\u52a8\u751f\u6210id\uff0c\u901f\u5ea6\u4f1a\u63d0\u534720%\u5de6\u53f3\uff0c\u4f46\u6570\u636e\u65e0\u6cd5\u4fee\u590d\uff0c\u9002\u5408\u65e5\u5fd7\u578b\u6570\u636e(\u5bf9\u6570\u636e\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8\u7684)")))}d.isMDXComponent=!0}}]);